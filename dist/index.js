(()=>{"use strict";(()=>{function t(t){return t.getContext("2d")}function i(t,i,e){t.width=i,t.height=e}function e(t,i,e){t.clearRect(0,0,i,e)}class s{constructor(t,i,e,s,n,o,a,r,h,c=0){this.context=t,this.width=i,this.height=e,this.mouseX=s,this.mouseY=n,this.mouseRadius=2e4,this.originX=o,this.originY=a,this.color=r,this.x=Math.random()*this.width,this.y=Math.random()*this.height,this.gap=c,this.size=h-this.gap,this.vectorX=0,this.vectorY=0,this.mouseParticleDistanceX=0,this.mouseParticleDistanceY=0,this.mouseTotalDistance=0,this.force=0,this.angle=0,this.friction=.6*Math.random()+.15,this.ease=.2*Math.random()+.05}update(){this.mouseParticleDistanceX=this.mouseX-this.x,this.mouseParticleDistanceY=this.mouseY-this.y,this.mouseTotalDistance=Math.pow(this.mouseParticleDistanceX,2)+Math.pow(this.mouseParticleDistanceY,2),this.force=-1*this.mouseRadius/this.mouseTotalDistance;this.mouseTotalDistance<this.mouseRadius&&(this.angle=Math.atan2(this.mouseParticleDistanceY,this.mouseParticleDistanceX),this.vectorX=Math.cos(this.angle)*this.force,this.vectorY=Math.sin(this.angle)*this.force),this.vectorX*=this.friction,this.vectorY*=this.friction,this.x+=this.vectorX+(this.originX-this.x)*this.ease,this.y+=this.vectorY+(this.originY-this.y)*this.ease}draw(){this.context.fillStyle=this.color,this.context.fillRect(this.x,this.y,this.size,this.size)}}const{log:n,error:o,table:a,time:r,timeEnd:h,timeStamp:c,timeLog:d,assert:u,clear:l,count:v,countReset:f,group:m,groupCollapsed:g,groupEnd:p,trace:w,profile:x,profileEnd:y,warn:D,debug:E,info:M,dir:L,dirxml:P}=console;function X(t,i){var e;if(!i)return document.querySelector(t);return(null===(e=null==i?void 0:i.tagName)||void 0===e?void 0:e.includes("-"))?i.shadowRoot.querySelector(t):i.querySelector(t)}function Y(t,i){t.classList.add(i)}function R(t,i){t.classList.remove(i)}function C(t){return Array.from(t)}var T=function(t,i,e,s){return new(e||(e=Promise))((function(n,o){function a(t){try{h(s.next(t))}catch(t){o(t)}}function r(t){try{h(s.throw(t))}catch(t){o(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(a,r)}h((s=s.apply(t,i||[])).next())}))};function F(t,i){const{type:e}=t;var s,n;return(s=e,n="/",s.split(n))[0]===i}function _(t){return new Promise(((i,e)=>{const s=new FileReader;s.readAsDataURL(t),s.addEventListener("load",(()=>{const t=s.result;"string"!=typeof t?e("Error: Base64 string not found."):i(t)})),s.addEventListener("error",(()=>{e("Error: Failed to read audio file.")}))}))}var A=function(t,i,e,s){return new(e||(e=Promise))((function(n,o){function a(t){try{h(s.next(t))}catch(t){o(t)}}function r(t){try{h(s.throw(t))}catch(t){o(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(a,r)}h((s=s.apply(t,i||[])).next())}))};n("Hello world!");const b=X(".index__input");b.addEventListener("change",(function(t){return A(this,void 0,void 0,(function*(){B();try{const i=t.currentTarget,e=yield function(t){return T(this,void 0,void 0,(function*(){try{const i=C(t.files);return 1===i.length?i[0]:i}catch(t){o({fileRetrievalError:t})}}))}(i);if(!F(e,"image"))throw Y(S,"invalid-img-upload"),"File uploaded is not an image!";const s=yield _(e);yield H(s),G(),J(),O(),K()}catch(t){o("File upload error:",{fileUploadError:t})}finally{R(S,"dragging")}}))}));const S=X(".index__label");S.addEventListener("dragover",(function(t){t.preventDefault(),B(),Y(S,"dragging")})),S.addEventListener("dragleave",(function(t){t.preventDefault(),B(),R(S,"dragging")})),S.addEventListener("drop",(function(t){return A(this,void 0,void 0,(function*(){t.preventDefault(),n(t),B();try{const i=yield function(t){return T(this,void 0,void 0,(function*(){try{const i=C(t.dataTransfer.files);return i.length<=1?i[0]:i}catch(t){o({fileRetrievalError:t})}}))}(t);if(!i)throw Y(S,"invalid-drop"),"Data dropped is not a file!";if(!F(i,"image"))throw Y(S,"invalid-img-drop"),"File dropped is not an image!";n(i);const e=yield _(i);yield H(e),G(),J(),O(),K()}catch(t){o("File drop error:",{fileDropError:t}),Y(S,"invalid-drop")}finally{R(S,"dragging")}}))}));const q=X(".index__image"),z={width:0,height:0,aspectRatio:0},I=X(".index__delete-button");I.addEventListener("click",(function(){e(U,$.width,$.height),q.src="",b.value="",Y(I,"hide"),cancelAnimationFrame(k),N.reset(),Y($,"hide"),i($,0,0),R(S,"hide")}));const $=X(".index__canvas"),U=t($);let k=0;function B(){R(S,"invalid-drop"),R(S,"invalid-img-drop"),R(S,"invalid-img-upload")}function H(t){return A(this,void 0,void 0,(function*(){q.src=t,q.addEventListener("load",j)}))}let N=new class{constructor(i,e){this.canvas=i,this.context=t(i),this.particlesArray=[],this.imageElement=e,this.mouseX=0,this.mouseY=0,this.setMouseCoordinates=this.setMouseCoordinates.bind(this)}addMouseEventToCanvas(){this.canvas.addEventListener("mousemove",this.setMouseCoordinates)}removeMouseEventFromCanvas(){this.canvas.removeEventListener("mousemove",this.setMouseCoordinates)}setMouseCoordinates(t){this.mouseX=t.x,this.mouseY=t.y}createImage(){this.context.drawImage(this.imageElement,0,0),this.pixelsData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),this.addMouseEventToCanvas(),this.convertToPixels(7)}animatePixels(){for(const t of this.particlesArray)t.update(),t.draw()}convertToPixels(t=1){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);for(let i=0;i<this.pixelsData.height;i+=t)for(let e=0;e<this.pixelsData.width;e+=t){const n=4*e+4*i*this.pixelsData.width;if(this.pixelsData.data[n+3]<=0)continue;const o=this.pixelsData.data[n+0],a=this.pixelsData.data[n+1],r=this.pixelsData.data[n+2],h=`rgb(${o}, ${a}, ${r})`,c=new s(this.context,this.canvas.width,this.canvas.height,this.mouseX,this.mouseY,e,i,h,t);this.particlesArray.push(c)}}reset(){this.particlesArray=[],this.removeMouseEventFromCanvas()}}($,q);function j(t){const{width:e,height:s}=t.currentTarget;z.width=e,z.height=s,z.aspectRatio=e/s,i($,z.width,z.height),n(N),N.createImage()}function G(){R(S,"dragging"),Y(S,"hide")}function J(){R(I,"hide")}function K(){R($,"hide")}function O(){e(U,$.width,$.height),N.animatePixels(),k=requestAnimationFrame(O)}window.addEventListener("resize",(function(t){n("changed width")}))})()})();