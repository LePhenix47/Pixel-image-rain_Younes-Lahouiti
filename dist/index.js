(()=>{"use strict";(()=>{const{log:n,error:t,table:e,time:i,timeEnd:r,timeStamp:o,timeLog:a,assert:d,clear:c,count:u,countReset:l,group:f,groupCollapsed:s,groupEnd:v,trace:g,profile:h,profileEnd:p,warn:m,debug:w,info:y,dir:E,dirxml:L}=console;function x(n,t){var e;if(!t)return document.querySelector(n);return(null===(e=null==t?void 0:t.tagName)||void 0===e?void 0:e.includes("-"))?t.shadowRoot.querySelector(n):t.querySelector(n)}function R(n,t){n.classList.add(t)}function _(n,t){n.classList.remove(t)}function D(n){return Array.from(n)}var F=function(n,t,e,i){return new(e||(e=Promise))((function(r,o){function a(n){try{c(i.next(n))}catch(n){o(n)}}function d(n){try{c(i.throw(n))}catch(n){o(n)}}function c(n){var t;n.done?r(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,d)}c((i=i.apply(n,t||[])).next())}))};function S(n,t){const{type:e}=n;var i,r;return(i=e,r="/",i.split(r))[0]===t}function b(n){return new Promise(((t,e)=>{const i=new FileReader;i.readAsDataURL(n),i.addEventListener("load",(()=>{const n=i.result;"string"!=typeof n?e("Error: Base64 string not found."):t(n)})),i.addEventListener("error",(()=>{e("Error: Failed to read audio file.")}))}))}var q=function(n,t,e,i){return new(e||(e=Promise))((function(r,o){function a(n){try{c(i.next(n))}catch(n){o(n)}}function d(n){try{c(i.throw(n))}catch(n){o(n)}}function c(n){var t;n.done?r(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,d)}c((i=i.apply(n,t||[])).next())}))};n("Hello world!");const P=x(".index__input"),T=x(".index__label"),A=x(".index__image"),U={width:0,height:0,aspectRatio:0},z=x(".index__canvas");function B(){_(T,"invalid-drop"),_(T,"invalid-img-drop"),_(T,"invalid-img-upload")}function C(n){A.src=n,A.addEventListener("load",H)}function H(n){const{width:t,height:e}=n.currentTarget;U.width=t,U.height=e,U.aspectRatio=t/e,function(n,t,e){n.width=t,n.height=e}(z,U.width,U.height)}P.addEventListener("change",(function(n){return q(this,void 0,void 0,(function*(){B();try{const e=n.currentTarget,i=yield function(n){return F(this,void 0,void 0,(function*(){try{const t=D(n.files);return 1===t.length?t[0]:t}catch(n){t({fileRetrievalError:n})}}))}(e);if(!S(i,"image"))throw R(T,"invalid-img-upload"),"File uploaded is not an image!";C(yield b(i))}catch(n){t("File upload error:",{fileUploadError:n})}finally{_(T,"dragging")}}))})),T.addEventListener("dragover",(function(n){n.preventDefault(),B(),R(T,"dragging")})),T.addEventListener("dragleave",(function(n){n.preventDefault(),B(),_(T,"dragging")})),T.addEventListener("drop",(function(e){return q(this,void 0,void 0,(function*(){e.preventDefault(),n(e),B();try{const i=yield function(n){return F(this,void 0,void 0,(function*(){try{const t=D(n.dataTransfer.files);return t.length<=1?t[0]:t}catch(n){t({fileRetrievalError:n})}}))}(e);if(!i)throw R(T,"invalid-drop"),"Data dropped is not a file!";if(!S(i,"image"))throw R(T,"invalid-img-drop"),"File dropped is not an image!";n(i);C(yield b(i))}catch(n){t("File drop error:",{fileDropError:n}),R(T,"invalid-drop")}finally{_(T,"dragging")}}))})),window.addEventListener("resize",(function(t){n("changed width")}))})()})();