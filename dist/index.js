(()=>{"use strict";(()=>{function t(t){return t.getContext("2d")}function i(t,i,e){t.width=i,t.height=e}class e{constructor(t,i,e,n,r,a,o,s=0){this.context=t,this.width=i,this.height=e,this.originX=n,this.originY=r,this.color=a,this.x=Math.random()*this.width,this.y=Math.random()*this.height,this.gap=s,this.size=o-this.gap,this.vectorX=0,this.vectorY=0,this.mouseParticleDistanceX=0,this.mouseParticleDistanceY=0,this.mouseTotalDistance=0,this.force=0,this.angle=0,this.friction=.6*Math.random()+.15,this.ease=.2*Math.random()+.05}update(){}draw(){}}const{log:n,error:r,table:a,time:o,timeEnd:s,timeStamp:c,timeLog:d,assert:h,clear:l,count:u,countReset:f,group:g,groupCollapsed:v,groupEnd:p,trace:m,profile:w,profileEnd:x,warn:y,debug:E,info:D,dir:L,dirxml:R}=console;function _(t,i){var e;if(!i)return document.querySelector(t);return(null===(e=null==i?void 0:i.tagName)||void 0===e?void 0:e.includes("-"))?i.shadowRoot.querySelector(t):i.querySelector(t)}function P(t,i){t.classList.add(i)}function F(t,i){t.classList.remove(i)}function b(t){return Array.from(t)}var A=function(t,i,e,n){return new(e||(e=Promise))((function(r,a){function o(t){try{c(n.next(t))}catch(t){a(t)}}function s(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var i;t.done?r(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,s)}c((n=n.apply(t,i||[])).next())}))};function T(t,i){const{type:e}=t;var n,r;return(n=e,r="/",n.split(r))[0]===i}function I(t){return new Promise(((i,e)=>{const n=new FileReader;n.readAsDataURL(t),n.addEventListener("load",(()=>{const t=n.result;"string"!=typeof t?e("Error: Base64 string not found."):i(t)})),n.addEventListener("error",(()=>{e("Error: Failed to read audio file.")}))}))}var M=function(t,i,e,n){return new(e||(e=Promise))((function(r,a){function o(t){try{c(n.next(t))}catch(t){a(t)}}function s(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var i;t.done?r(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,s)}c((n=n.apply(t,i||[])).next())}))};n("Hello world!");const S=_(".index__input");S.addEventListener("change",(function(t){return M(this,void 0,void 0,(function*(){U();try{const i=t.currentTarget,e=yield function(t){return A(this,void 0,void 0,(function*(){try{const i=b(t.files);return 1===i.length?i[0]:i}catch(t){r({fileRetrievalError:t})}}))}(i);if(!T(e,"image"))throw P(q,"invalid-img-upload"),"File uploaded is not an image!";const n=yield I(e);yield k(n),N(),j()}catch(t){r("File upload error:",{fileUploadError:t})}finally{F(q,"dragging")}}))}));const q=_(".index__label");q.addEventListener("dragover",(function(t){t.preventDefault(),U(),P(q,"dragging")})),q.addEventListener("dragleave",(function(t){t.preventDefault(),U(),F(q,"dragging")})),q.addEventListener("drop",(function(t){return M(this,void 0,void 0,(function*(){t.preventDefault(),n(t),U();try{const i=yield function(t){return A(this,void 0,void 0,(function*(){try{const i=b(t.dataTransfer.files);return i.length<=1?i[0]:i}catch(t){r({fileRetrievalError:t})}}))}(t);if(!i)throw P(q,"invalid-drop"),"Data dropped is not a file!";if(!T(i,"image"))throw P(q,"invalid-img-drop"),"File dropped is not an image!";n(i);const e=yield I(i);yield k(e),N(),j()}catch(t){r("File drop error:",{fileDropError:t}),P(q,"invalid-drop")}finally{F(q,"dragging")}}))}));const X=_(".index__image"),Y={width:0,height:0,aspectRatio:0},$=_(".index__delete-button");$.addEventListener("click",(function(){t=C,e=z.width,n=z.height,t.clearRect(0,0,e,n),i(z,0,0),X.src="",S.value="",F(q,"hide"),P($,"hide");var t,e,n}));const z=_(".index__canvas"),C=t(z);function U(){F(q,"invalid-drop"),F(q,"invalid-img-drop"),F(q,"invalid-img-upload")}function k(t){return M(this,void 0,void 0,(function*(){X.src=t,X.addEventListener("load",H)}))}let B=new class{constructor(i,e){this.canvas=i,this.context=t(i),this.particlesArray=[],this.imageElement=e,this.pixelsData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}createImage(){this.context.drawImage(this.imageElement,0,0)}animatePixels(){for(const t of this.particlesArray)t.update(),t.draw()}convertToPixels(t=1){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);for(let i=0;i<this.pixelsData.height;i+=t)for(let n=0;n<this.pixelsData.width;n+=t){const r=4*n+4*i*this.pixelsData.width;if(this.pixelsData.data[r+3]<=0)continue;const a=this.pixelsData.data[r+0],o=this.pixelsData.data[r+1],s=this.pixelsData.data[r+2],c=`rgb(${a}, ${o}, ${s})`,d=new e(this.context,this.canvas.width,this.canvas.height,n,i,c,t);this.particlesArray.push(d)}}}(z,X);function H(t){const{width:e,height:r}=t.currentTarget;Y.width=e,Y.height=r,Y.aspectRatio=e/r,i(z,Y.width,Y.height),n(Y),B.createImage()}function N(){F(q,"dragging"),P(q,"hide")}function j(){F($,"hide")}window.addEventListener("resize",(function(t){n("changed width")}))})()})();