(()=>{"use strict";(()=>{function t(t){return t.getContext("2d")}function i(t,i,e){t.width=i,t.height=e}function e(t,i,e){t.clearRect(0,0,i,e)}class n{constructor(t,i,e,n,r,a,o,s=0){this.context=t,this.width=i,this.height=e,this.originX=n,this.originY=r,this.color=a,this.x=Math.random()*this.width,this.y=Math.random()*this.height,this.gap=s,this.size=o-this.gap,this.vectorX=0,this.vectorY=0,this.mouseParticleDistanceX=0,this.mouseParticleDistanceY=0,this.mouseTotalDistance=0,this.force=0,this.angle=0,this.friction=.6*Math.random()+.15,this.ease=.2*Math.random()+.05}update(){this.x+=this.vectorX+(this.originX-this.x)*this.ease,this.y+=this.vectorY+(this.originY-this.y)*this.ease}draw(){this.context.fillStyle=this.color,this.context.fillRect(this.x,this.y,this.size,this.size)}}const{log:r,error:a,table:o,time:s,timeEnd:c,timeStamp:h,timeLog:d,assert:l,clear:u,count:f,countReset:g,group:v,groupCollapsed:p,groupEnd:m,trace:w,profile:x,profileEnd:y,warn:E,debug:D,info:L,dir:R,dirxml:_}=console;function P(t,i){var e;if(!i)return document.querySelector(t);return(null===(e=null==i?void 0:i.tagName)||void 0===e?void 0:e.includes("-"))?i.shadowRoot.querySelector(t):i.querySelector(t)}function A(t,i){t.classList.add(i)}function F(t,i){t.classList.remove(i)}function T(t){return Array.from(t)}var b=function(t,i,e,n){return new(e||(e=Promise))((function(r,a){function o(t){try{c(n.next(t))}catch(t){a(t)}}function s(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var i;t.done?r(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,s)}c((n=n.apply(t,i||[])).next())}))};function S(t,i){const{type:e}=t;var n,r;return(n=e,r="/",n.split(r))[0]===i}function X(t){return new Promise(((i,e)=>{const n=new FileReader;n.readAsDataURL(t),n.addEventListener("load",(()=>{const t=n.result;"string"!=typeof t?e("Error: Base64 string not found."):i(t)})),n.addEventListener("error",(()=>{e("Error: Failed to read audio file.")}))}))}var Y=function(t,i,e,n){return new(e||(e=Promise))((function(r,a){function o(t){try{c(n.next(t))}catch(t){a(t)}}function s(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var i;t.done?r(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,s)}c((n=n.apply(t,i||[])).next())}))};r("Hello world!");const q=P(".index__input");q.addEventListener("change",(function(t){return Y(this,void 0,void 0,(function*(){B();try{const i=t.currentTarget,e=yield function(t){return b(this,void 0,void 0,(function*(){try{const i=T(t.files);return 1===i.length?i[0]:i}catch(t){a({fileRetrievalError:t})}}))}(i);if(!S(e,"image"))throw A(z,"invalid-img-upload"),"File uploaded is not an image!";const n=yield X(e);yield H(n),G(),J(),K()}catch(t){a("File upload error:",{fileUploadError:t})}finally{F(z,"dragging")}}))}));const z=P(".index__label");z.addEventListener("dragover",(function(t){t.preventDefault(),B(),A(z,"dragging")})),z.addEventListener("dragleave",(function(t){t.preventDefault(),B(),F(z,"dragging")})),z.addEventListener("drop",(function(t){return Y(this,void 0,void 0,(function*(){t.preventDefault(),r(t),B();try{const i=yield function(t){return b(this,void 0,void 0,(function*(){try{const i=T(t.dataTransfer.files);return i.length<=1?i[0]:i}catch(t){a({fileRetrievalError:t})}}))}(t);if(!i)throw A(z,"invalid-drop"),"Data dropped is not a file!";if(!S(i,"image"))throw A(z,"invalid-img-drop"),"File dropped is not an image!";r(i);const e=yield X(i);yield H(e),G(),J(),K()}catch(t){a("File drop error:",{fileDropError:t}),A(z,"invalid-drop")}finally{F(z,"dragging")}}))}));const I=P(".index__image"),M={width:0,height:0,aspectRatio:0},$=P(".index__delete-button");$.addEventListener("click",(function(){e(U,C.width,C.height),I.src="",q.value="",A($,"hide"),cancelAnimationFrame(k),N.reset(),i(C,0,0),F(z,"hide")}));const C=P(".index__canvas"),U=t(C);let k=0;function B(){F(z,"invalid-drop"),F(z,"invalid-img-drop"),F(z,"invalid-img-upload")}function H(t){return Y(this,void 0,void 0,(function*(){I.src=t,I.addEventListener("load",j)}))}let N=new class{constructor(i,e){this.canvas=i,this.context=t(i),this.particlesArray=[],this.imageElement=e}createImage(){this.context.drawImage(this.imageElement,0,0),this.pixelsData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),this.convertToPixels(10)}animatePixels(){for(const t of this.particlesArray)t.update(),t.draw()}convertToPixels(t=1){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);for(let i=0;i<this.pixelsData.height;i+=t)for(let e=0;e<this.pixelsData.width;e+=t){const r=4*e+4*i*this.pixelsData.width;if(this.pixelsData.data[r+3]<=0)continue;const a=this.pixelsData.data[r+0],o=this.pixelsData.data[r+1],s=this.pixelsData.data[r+2],c=`rgb(${a}, ${o}, ${s})`,h=new n(this.context,this.canvas.width,this.canvas.height,e,i,c,t);this.particlesArray.push(h)}}reset(){this.particlesArray=[]}}(C,I);function j(t){const{width:e,height:n}=t.currentTarget;M.width=e,M.height=n,M.aspectRatio=e/n,i(C,M.width,M.height),r(N),N.createImage()}function G(){F(z,"dragging"),A(z,"hide")}function J(){F($,"hide")}function K(){e(U,C.width,C.height),N.animatePixels(),k=requestAnimationFrame(K)}window.addEventListener("resize",(function(t){r("changed width")}))})()})();