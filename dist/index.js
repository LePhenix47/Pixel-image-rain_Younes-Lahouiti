(()=>{"use strict";(()=>{function t(t){return t.getContext("2d")}const{log:e,error:i,table:n,time:r,timeEnd:a,timeStamp:o,timeLog:d,assert:c,clear:s,count:l,countReset:u,group:f,groupCollapsed:h,groupEnd:g,trace:v,profile:p,profileEnd:m,warn:w,debug:y,info:x,dir:E,dirxml:D}=console;function L(t,e){var i;if(!e)return document.querySelector(t);return(null===(i=null==e?void 0:e.tagName)||void 0===i?void 0:i.includes("-"))?e.shadowRoot.querySelector(t):e.querySelector(t)}function R(t,e){t.classList.add(e)}function _(t,e){t.classList.remove(e)}function F(t){return Array.from(t)}var P=function(t,e,i,n){return new(i||(i=Promise))((function(r,a){function o(t){try{c(n.next(t))}catch(t){a(t)}}function d(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,d)}c((n=n.apply(t,e||[])).next())}))};function A(t,e){const{type:i}=t;var n,r;return(n=i,r="/",n.split(r))[0]===e}function I(t){return new Promise(((e,i)=>{const n=new FileReader;n.readAsDataURL(t),n.addEventListener("load",(()=>{const t=n.result;"string"!=typeof t?i("Error: Base64 string not found."):e(t)})),n.addEventListener("error",(()=>{i("Error: Failed to read audio file.")}))}))}var S=function(t,e,i,n){return new(i||(i=Promise))((function(r,a){function o(t){try{c(n.next(t))}catch(t){a(t)}}function d(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,d)}c((n=n.apply(t,e||[])).next())}))};e("Hello world!");const T=L(".index__input"),b=L(".index__label"),q=L(".index__image"),C={width:0,height:0,aspectRatio:0},U=L(".index__canvas");t(U);function z(){_(b,"invalid-drop"),_(b,"invalid-img-drop"),_(b,"invalid-img-upload")}function B(t){return S(this,void 0,void 0,(function*(){q.src=t,q.addEventListener("load",N)}))}T.addEventListener("change",(function(t){return S(this,void 0,void 0,(function*(){z();try{const e=t.currentTarget,n=yield function(t){return P(this,void 0,void 0,(function*(){try{const e=F(t.files);return 1===e.length?e[0]:e}catch(t){i({fileRetrievalError:t})}}))}(e);if(!A(n,"image"))throw R(b,"invalid-img-upload"),"File uploaded is not an image!";const r=yield I(n);yield B(r),j()}catch(t){i("File upload error:",{fileUploadError:t})}finally{_(b,"dragging")}}))})),b.addEventListener("dragover",(function(t){t.preventDefault(),z(),R(b,"dragging")})),b.addEventListener("dragleave",(function(t){t.preventDefault(),z(),_(b,"dragging")})),b.addEventListener("drop",(function(t){return S(this,void 0,void 0,(function*(){t.preventDefault(),e(t),z();try{const n=yield function(t){return P(this,void 0,void 0,(function*(){try{const e=F(t.dataTransfer.files);return e.length<=1?e[0]:e}catch(t){i({fileRetrievalError:t})}}))}(t);if(!n)throw R(b,"invalid-drop"),"Data dropped is not a file!";if(!A(n,"image"))throw R(b,"invalid-img-drop"),"File dropped is not an image!";e(n);const r=yield I(n);yield B(r),j()}catch(t){i("File drop error:",{fileDropError:t}),R(b,"invalid-drop")}finally{_(b,"dragging")}}))}));let H=new class{constructor(e,i){this.canvas=e,this.context=t(e),this.particlesArray=[],this.imageElement=i,this.pixelsData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}createImage(){this.context.drawImage(this.imageElement,0,0)}animatePixels(){for(const t of this.particlesArray)t.update(),t.draw()}convertToPixels(t=1){for(let e=0;e<this.pixelsData.height;e+=t)for(let i=0;i<this.pixelsData.width;i+=t){const t=4*i+4*e*this.pixelsData.width;if(this.pixelsData.data[t+3]<=0)continue;this.pixelsData.data[t+0],this.pixelsData.data[t+1],this.pixelsData.data[t+2]}}}(U,q);function N(t){const{width:i,height:n}=t.currentTarget;C.width=i,C.height=n,C.aspectRatio=i/n,function(t,e,i){t.width=e,t.height=i}(U,C.width,C.height),e(C),H.createImage()}function j(){_(b,"dragging"),R(b,"hide")}window.addEventListener("resize",(function(t){e("changed width")}))})()})();